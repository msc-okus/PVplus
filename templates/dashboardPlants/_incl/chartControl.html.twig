{% from "dashboardPlants/_incl/macrosMenuSelectBox.html.twig" import acActOverview, acActGroup, dcActGroup, dcGroupPowerDiff, irradiation, inverterPerformance, currentDcOverview, currentDcInverter, currentDcGroup, dcActPlant, dcActOverview, currentDcString, acActPlant, acVoltage, acCurrent, acFrequency, acReactive %}
{% from "dashboardPlants/_incl/macrosGroupeMenuSelectBox.html.twig" import groupMenu, groupMenuNew %}
<div class="grid-x grid-margin-x">
    <input type="hidden" name="eide" value="{{ aktAnlage.eignerId }}">
    <input type="hidden" name="aid" value="{{ aktAnlage.AnlId }}">
    <input type="hidden" name="mysubmit" id="mysubmit" value="no">



    <div class="cell medium-6 large-4 xlarge-2">
        <select class="js-submit-onchange selectedChart" title="Please select a view from the list." data-toggle="tooltip" name="selectedChart">
            <optgroup label="Analysis">
                {% if aktAnlage.showAvailability or is_granted('ROLE_ADMIN') %}<option value="availability" {% if form.selectedChart == 'availability' %}selected{% endif %}>Show Availability [%]</option>{% endif %}
                {% if aktAnlage.showPr or is_granted('ROLE_ADMIN') %}<option value="pr_and_av" {% if form.selectedChart == 'pr_and_av' %}selected{% endif %}>Show PR&nbsp;[%]</option>{% endif %}
                {% if aktAnlage.showForecast %}<option value="forecast" {% if form.selectedChart == 'forecast' %}selected{% endif %}>Forecast&nbsp;[kWh]</option>{% endif %}
            </optgroup>
            <!-- ab hier AC -->
            <optgroup label="AC">
                {{ acActPlant(form, aktAnlage) }}       {# AC1 #}
                {{ acActOverview(form, aktAnlage) }}    {# AC2 #}
                {{ acActGroup(form, aktAnlage) }}       {# AC3 #}
                {% if is_granted('ROLE_DEV') %}<option value="ac_grp_power_diff" {% if form.selectedChart == 'ac_grp_power_diff' or not form.selectedChart %}selected{% endif %}>AC - Inverter {% if is_granted('ROLE_DEV') %}[AC 4]{% endif %}</option>{% endif %}
                {{ acVoltage(form, aktAnlage) }}
                {{ acCurrent(form, aktAnlage) }}
                {{ acFrequency(form, aktAnlage) }}
                {{ acReactive(form, aktAnlage) }}
            </optgroup>

            {% if aktAnlage.hasDc %}
                <!-- ab hier DC -->
                <optgroup label="DC Power">
                    {{ dcActPlant(form, aktAnlage) }}       {# DC1 #}
                    {{ dcActOverview(form, aktAnlage) }}    {# DC2 #}
                    {{ dcActGroup(form, aktAnlage) }}       {# DC3 #}
                    {{ dcGroupPowerDiff(form, aktAnlage) }} {# DC4 Bar Chart #}
                </optgroup>

                <!-- ab hier Current DC -->
                <optgroup label="DC Current">
                    {{ currentDcOverview(form, aktAnlage) }}    {# Curr1 #}
                    {{ currentDcGroup(form, aktAnlage) }}       {# Curr2 #}
                    {{ currentDcInverter(form, aktAnlage) }}    {# Curr3 #}
                    {{ currentDcString(form, aktAnlage) }}      {# Curr4 #}
                </optgroup>
                <!-- ab hier Voltage DC -->
                {#
                <optgroup label="DC Voltage">
                    {% if aktAnlage.showGraphVoltGrp or is_granted('ROLE_ADMIN') %}<option value="dc_voltage_groups" {% if form.selectedChart == 'dc_voltage_groups' %}selected{% endif %}>DC - Voltage, Groups</option>{% endif %}
                    {% if aktAnlage.showStringCharts or is_granted('ROLE_ADMIN') %}<option value="dc_voltage_mpp" {% if form.selectedChart == 'dc_voltage_mpp' %}selected{% endif %}>DC - Voltage, String</option>{% endif %}
                </optgroup>
                #}
            {% endif %}

            <!-- diverses -->
            <optgroup label="Sensors">
                {{ irradiation(form, aktAnlage) }}
                <option value="temp" {% if form.selectedChart == 'temp' %}selected{% endif %}>Temperature [Â°C]</option>
            </optgroup>

            <!-- Developer and G4N Stuff -->
            {% if is_granted('ROLE_ADMIN') %}
                <optgroup label="Admin Stuff">
                    <option value="status_log" {% if form.selectedChart == 'status_log' %}selected{% endif %}>Show status log</option>
                    {% if aktAnlage.showPvSyst or is_granted('ROLE_DEV') %}
                        <option value="pvsyst" {% if form.selectedChart == 'pvsyst' %}selected{% endif %}>Show pvSyst</option>
                    {% endif %}
                </optgroup>
            {% endif %}

        </select>
    </div>

    <div class="cell medium-6 large-4 xlarge-3">
        {{ groupMenuNew(form, aktAnlage) }}
    </div>
    <div class="cell medium-4 large-4 xlarge-2">
        <div class="input-group">
            <input id="startDate" name="to" class="input-group-field js-submit-onchange" size="16" type="text" value="{{ form.to|date('Y-m-d') }}" data-date-format="yyyy-mm-dd" style="max-width: 158px;">
            <span class="input-group-label"><i class="fa fa-calendar"></i></span>
        </div>

        <script>
            $(function(){
                $('#startDate').fdatepicker();
            });
        </script>
    </div>
    <h5>15 MINUTES</h5>

    <div class="cell medium-3 large-6 xlarge-1">
            <div class="switch tiny cell ">
                <input class="switch-input js-submit-onchange" id="hour" type="checkbox" name="hour" onclick="Display()" {%if form.hour == true  %} checked {% endif %}>
                <label class="switch-paddle" for="hour">
                    <span class="show-for-sr"></span>
                </label>
            </div>
    </div>
    <h5>1 HOUR</h5>
    <div class="cell medium-8 large-12 xlarge-5 ">
        <div class="small button-group round toggle">
            <label class="button js-submit-onchange {% if form.optionDate == 1 or not form.optionDate %}active{% endif %} {% if form.selectedChart == 'pr_and_av' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="1" {% if form.optionDate == 1 or not form.optionDate %}checked="checked"{% endif %}>one day
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 3 %}active{% endif %} {% if form.selectedChart == 'pr_and_av' or form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="3" {% if form.optionDate == 3 %}checked{% endif %}>last 3 days
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 7 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="7" {% if form.optionDate == 7 %}checked{% endif %}>last 7 days
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 14 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="14" {% if form.optionDate == 14 %}checked{% endif %}>last 14 days
            </label>
            <!--
            <label class="button js-submit-onchange {% if form.optionDate == 30 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="30" {% if form.optionDate == 30 %}checked{% endif %}>last 30 days
            </label>
            -->
            <label class="button js-submit-onchange {% if form.optionDate == 100000 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="100000" {% if form.optionDate == 100000 %}checked{% endif %}>month
            </label>
        </div>


    </div>
</div>

