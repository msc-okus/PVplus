{% from "dashboardPlants/_incl/macrosMenuSelectBox.html.twig" import showHeatmap ,showTempHeatmap ,showSollIstHeatmap, acActOverview, acActGroup, dcActGroup, dcGroupPowerDiff, irradiation, inverterPerformance,
    currentDcOverview, currentDcInverter, currentDcGroup, dcActPlant, dcActOverview, currentDcString, acActPlant, acVoltage, acCurrent, acFrequency, acReactive, voltageDcString %}
{% from "dashboardPlants/_incl/macrosGroupeMenuSelectBox.html.twig" import groupMenu, groupMenuNew %}
<div class="grid-x grid-margin-x">
    <input type="hidden" name="eide" value="{{ aktAnlage.eignerId }}">
    <input type="hidden" name="aid" value="{{ aktAnlage.AnlId }}">
    <input type="hidden" name="mysubmit" id="mysubmit" value="no">

    <div class="cell medium-6 large-4 xlarge-2">
        <select class="js-submit-onchange selectedChart" title="Please select a view from the list." data-toggle="tooltip" name="selectedChart">
            <optgroup label="Analysis">
                {% if aktAnlage.showAvailability or is_granted('ROLE_ADMIN') %}<option value="availability" {% if form.selectedChart == 'availability' %}selected{% endif %}>Show Availability [%]</option>{% endif %}
                {% if aktAnlage.showPr or is_granted('ROLE_ADMIN') %}<option value="pr_and_av" {% if form.selectedChart == 'pr_and_av' %}selected{% endif %}>Show PR&nbsp;[%]</option>{% endif %}
                {% if aktAnlage.showForecast %}<option value="forecast" {% if form.selectedChart == 'forecast' %}selected{% endif %}>Forecast&nbsp;[kWh]</option>{% endif %}
                {{ showHeatmap(form, aktAnlage) }}            {# Headmap #}
                {{ showTempHeatmap(form, aktAnlage) }}        {# Headmap #}
                {{ showSollIstHeatmap(form, aktAnlage) }}     {# Headmap #}
            </optgroup>
            <!-- ab hier AC -->
            <optgroup label="AC">
                {{ acActPlant(form, aktAnlage) }}       {# AC1 #}
                {{ acActOverview(form, aktAnlage) }}    {# AC2 #}
                {{ acActGroup(form, aktAnlage) }}       {# AC3 #}
                <option value="ac_grp_power_diff" {% if form.selectedChart == 'ac_grp_power_diff' or not form.selectedChart %}selected{% endif %}>AC - Inverter {% if is_granted('ROLE_DEV') %}[AC 4]{% endif %}</option>
                {{ acVoltage(form, aktAnlage) }}
                {{ acCurrent(form, aktAnlage) }}
                {{ acFrequency(form, aktAnlage) }}
                {{ acReactive(form, aktAnlage) }}
            </optgroup>

            {% if aktAnlage.hasDc %}
                <!-- ab hier DC -->
                <optgroup label="DC Power">
                    {{ dcActPlant(form, aktAnlage) }}       {# DC1 #}
                    {{ dcActOverview(form, aktAnlage) }}    {# DC2 #}
                    {{ dcActGroup(form, aktAnlage) }}       {# DC3 #}
                    {{ dcGroupPowerDiff(form, aktAnlage) }} {# DC4 Bar Chart #}
                </optgroup>

                <!-- ab hier Current DC -->
                <optgroup label="DC Current">
                    {{ currentDcOverview(form, aktAnlage) }}    {# Curr1 #}
                    {{ currentDcGroup(form, aktAnlage) }}       {# Curr2 #}
                    {{ currentDcInverter(form, aktAnlage) }}    {# Curr3 #}
                    {{ currentDcString(form, aktAnlage) }}      {# Curr4 #}
                </optgroup>


                <optgroup label="DC Voltage">
                    {{ voltageDcString(form, aktAnlage) }}      {# VoltDC1 #}
                </optgroup>

            {% endif %}

            <!-- diverses -->
            <optgroup label="Sensors">
                {{ irradiation(form, aktAnlage) }}
                <option value="temp" {% if form.selectedChart == 'temp' %}selected{% endif %}>Temperature [Â°C]</option>
            </optgroup>

            <!-- Developer and G4N Stuff -->
            {% if is_granted('ROLE_ADMIN') %}
                <optgroup label="Admin Stuff">
                    <option value="status_log" {% if form.selectedChart == 'status_log' %}selected{% endif %}>Show status log</option>
                    {% if aktAnlage.showPvSyst or is_granted('ROLE_DEV') %}
                        <option value= "pvsyst" {% if form.selectedChart == 'pvsyst' %}selected{% endif %}>Show pvSyst</option>
                    {% endif %}
                    {% if is_granted('ROLE_DEV') %}
                        <option value= "grid" {% if form.selectedChart == 'grid' %}selected{% endif %}>Show grid</option>
                    {% endif %}
                </optgroup>
            {% endif %}

        </select>
    </div>

    <div class="cell medium-6 large-4 xlarge-3">
        {{ groupMenuNew(form, aktAnlage) }}
    </div>

    <div class="grid-x">
        <div class="cell medium-4 large-4 xlarge-2">
            <label class="button js-submit-onchange" style="background-color: #701b1b00;display: block;font-weight: 800;color: green;font-size: 38px;padding: 0;">
                <input type="radio" name="optionStep" value="lastday" style="display: none">
                <i class="fa fa-angle-left"></i></label>
        </div>
        <div class="cell medium-4 large-4 xlarge-8">
            <div class="input-group">
                <input id="startDate" name="to" class="input-group-field js-submit-onchange" size="16" type="text" value="{{ form.to|date('Y-m-d') }}" data-date-format="yyyy-mm-dd" style="max-width: 158px;">
                <span class="input-group-label"><i class="fa fa-calendar"></i></span>
            </div>
        </div>
        <div class="cell medium-4 large-4 xlarge-2">
            <label class="button js-submit-onchange" style="background-color: #701b1b00;display: block;font-weight: 800;color: green;font-size: 38px;padding: 0;">
                <input type="radio" name="optionStep" value="nextday" style="display: none">
                    <i class="fa fa-angle-right"></i></label>
        </div>
    </div>

    {% if (form.selectedChart != 'availability') and (form.selectedChart != 'pr_and_av') and (form.selectedChart != 'forecast') and (form.selectedChart != 'status_log') and (form.selectedChart != 'pvsyst') and (form.selectedChart != 'heatmap') and (form.selectedChart != 'tempheatmap') and (form.selectedChart != 'sollistheatmap') and (form.selectedChart != 'grid')%}
        <div class="cell medium-2 large-4 xlarge-1">
            <div class="switch tiny align-center-middle">
                <label class="" style="line-height: 1;"><small>Interval min.</small></label>
                <input class="switch-input js-submit-onchange" id="hour" type="checkbox" name="hour" {%if form.hour == true  %} checked {% endif %}>
                <label class="switch-paddle" for="hour">
                    <span class="show-for-sr"></span>
                    <span class="switch-active" aria-hidden="true">60</span>
                    <span class="switch-inactive" aria-hidden="true">15</span>
                </label>
            </div>
        </div>
    {% endif %}

    <div class="cell medium-6 large-8 xlarge-4">
        <div class="small button-group round toggle" {% if form.selectedChart == 'heatmap' or form.selectedChart == 'tempheatmap' or form.selectedChart == 'sollistheatmap'%}style="display: none"{% endif %}>
            <label class="button js-submit-onchange {% if form.optionDate == 1 or not form.optionDate %}active{% endif %} {% if form.selectedChart == 'pr_and_av' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="1" {% if form.optionDate == 1 or not form.optionDate %}checked="checked"{% endif %}>one day
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 3 %}active{% endif %} {% if form.selectedChart == 'pr_and_av' or form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="3" {% if form.optionDate == 3 %}checked{% endif %}>last 3 days
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 7 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="7" {% if form.optionDate == 7 %}checked{% endif %}>last 7 days
            </label>
            <label class="button js-submit-onchange {% if form.optionDate == 14 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="14" {% if form.optionDate == 14 %}checked{% endif %}>last 14 days
            </label>
            <!--
            <label class="button js-submit-onchange {% if form.optionDate == 30 %}active{% endif %} {% if form.selectedChart == 'availability' %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="30" {% if form.optionDate == 30 %}checked{% endif %}>last 30 days
            </label>
            -->
            <label class="button js-submit-onchange {% if form.optionDate == 100000 %}active{% endif %} {% if form.selectedChart == 'availability' and not is_granted('ROLE_ADMIN') %}disabled{% endif %}">
                <input type="radio" name="optionDate" value="100000" {% if form.optionDate == 100000 %}checked{% endif %}>month
            </label>
        </div>


    </div>
</div>

