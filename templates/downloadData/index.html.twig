{% extends 'base.html.twig' %}

{% block body %}
    <div class="grid-x">
        <div class="cell">
            <h1>Download Data</h1>
        </div>
    </div>
    {{ form_start(downloadForm, {'attr': {'novalidate': 'no'}}) }}
        <div class="grid-x grid-margin-x grid-padding-x">
            <div class="cell medium-2">
                {{ form_row(downloadForm.anlage) }}
            </div>
            <div class="cell medium-2">
                {{ form_row(downloadForm.startDate) }}
            </div>
            <div class="cell medium-2">
                {{ form_row(downloadForm.endDate) }}
            </div>
            <div class="cell medium-3">
                {{ form_row(downloadForm.data) }}
            </div>
            <div class="cell medium-3">
                {{ form_row(downloadForm.intervall) }}
            </div>
        </div>
        <div class="grid-x grid-margin-x grid-padding-x text-right">
            <div class="cell">
                {{ form_widget(downloadForm.close) }}
                {{ form_widget(downloadForm.calc) }}
            </div>
        </div>
        <div class="grid-x">
            <div class="cell">
                <div class="callout" style="min-height: 50vh;">
                    {{ output|raw }}
                </div>
            </div>
        </div>
    {{ form_end(downloadForm) }}
{% endblock %}


{% block title %}
    {{  parent() }}Download Data
{% endblock %}

{% block styles %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.flash.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/plug-ins/1.10.19/sorting/date-de.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#statistics').DataTable( {
                columnDefs: [
                    { type: 'de_datetime', targets: 0 },
                    { type: 'de_date', targets: 1 }
                ],
                ordering: true,
                dom: 'Bfrtip',
                'lengthMenu': [25],
                buttons: ['csv', 'excel', 'pdf']
            } );
        } );
    </script>
{% endblock %}