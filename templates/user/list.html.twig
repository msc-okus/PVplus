{% extends 'base.html.twig' %}
{% import 'macros/macros.library.html.twig' as macrolibrary %}

{% block title %}List User{% endblock %}

{% block body %}
    <h1>List Users</h1>
    {{ macrolibrary.searchbox(app.request.query.get('qu'), 'qu') }}
    <table class="table">
        <thead>
        <tr>
            <th>{{ knp_pagination_sortable(pagination,'Nr','c.id') }}</th>
            <th>{{ knp_pagination_sortable(pagination,'Name','c.name') }}</th>
            <th>Email</th>
            {# <th>Owner Access List</th> #}
            <th>Role</th>
            {% if is_granted('ROLE_G4N') %}
                <th>Owner</th>
                <th>Plant List</th>
                <th></th>
            {% endif %}
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for user in pagination %}
            <tr>
                <td>{{ user.userId }}</td>
                <td>{{ user.userName }}</td>
                <td>{{ user.email }}</td>
              {#  <td>{{ user.getEignerIdNew }}</td> #}
                <td><small>{{ user.rolesAsString }}</small></td>
                {% if is_granted('ROLE_G4N') %}
                {# <td>{% if user.owner %}{{ user.owner.firma }}{% endif %} </td> #}
                    <td><small>{{ user.grantedList }}</small></td>
                    <td><a class="hollow button tiny no-margin shadow" href="{{ path('app_dashboard', {_switch_user: user.email}) }}">Impersonate</a></td>
                {% endif %}
                <td><a href="{{ path('app_admin_user_edit', {id: user.userId}) }}" class="hollow button action-icon shadow"><span class="fa fa-edit"></span></a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {{ knp_pagination_render(pagination) }}
    <a class="button primary" href="{{ path('app_admin_user_new') }}">Create New</a>
{% endblock %}
