{% extends 'report/_asset_mangement_partials/_pageBase.html.twig' %}

{% block page %}
    <h3 style="color: {{ anlage.eigner.fontColor2 }};">Economics</h3>
    <span class="subheadline">Income per month</span>
    <table >
        <tr>
            <td colspan="2" style="text-align: left">
                <table class="asset_report_table_operations_data" style="width: 100%!important;">
                    <tbody>
                    <tr style="background-color: #ededed; font-weight: bold;">
                        <td class="tr_next_columns">Proceeds per month [EUR] </td>
                        {% set counter = 1 %}
                        {% for data in dataMonthArrayFullYear %}
                            {% if (counter < 7) %}
                                <td class="tr_next_columns" style="background-color: #ededed; text-align: center;">{{ data }} {{ year }}</td>
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; font-weight: bold; width: 180px;">Field in Tariff [EUR/kWh]</td>
                        {% set counter = 1 %}
                        {% for data in income_per_month.monthley_feed_in_tarif %}
                            {% if (counter < 7) %}
                                {% if (data == 0) %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data }}</td>
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; font-weight: bold;">Actual</td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in income_per_month.revenues_act %}
                            {% if (counter < 7) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        {% set total1a = total %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed!important;"><b>Expected g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in income_per_month.powerExp %}
                            {% if (counter < 7) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}

                            {% set counter = counter+1 %}
                        {% endfor %}
                        {% set total1c = total %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Forecast g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in income_per_month.gvn_plan_proceeds_EXP %}
                            {% if (counter < 7) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        {% set total1f = total %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Plan Simulation<sup>*</sup></b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in income_per_month.PVSYST_plan_proceeds_EXP %}
                            {% if (counter < 7) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        {% set total1b = total %}
                    </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: left">
                <table class="asset_report_table_operations_data" style="width: 100%!important;">
                    <tbody>
                    <tr style="background-color: #fff2cc; font-weight: bold;">
                        <td class="tr_next_columns" style="background-color: #ededed;">Proceeds per month [EUR] </td>
                        {% set counter = 1 %}
                        {% for data in dataMonthArrayFullYear %}
                            {% if (counter > 6) %}
                                <td class="tr_next_columns" style="background-color: #ededed; text-align: center;">{{ data }} {{ year }}</td>
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns" style="background-color: #ededed; font-weight: bold; text-align: center;">TOTAL</td>
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; font-weight: bold; width: 180px;">Field in Tariff [EUR/kWh]</td>
                        {% set counter = 1 %}
                        {% for data in income_per_month.monthley_feed_in_tarif %}
                            {% if (counter > 6) %}
                                {% if (data == 0) %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data }}</td>
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns" style=" text-align: center;">-</td>
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; font-weight: bold;">Actual</td>
                        {% set counter = 1 %}
                        {% set total = total1a %}
                        {% for data in income_per_month.revenues_act %}
                            {% if (counter > 6) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns">{{ total|number_format(0, ',', '.') }}</td>
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Expected g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = total1c %}
                        {% for data in income_per_month.powerExp %}
                            {% if (counter > 6) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns">{{ total|number_format(0, ',', '.') }}</td>
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Forecast g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = total1f %}
                        {% for data in income_per_month.gvn_plan_proceeds_EXP %}
                            {% if (counter > 6) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns">{{ total|number_format(0, ',', '.') }}</td>
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Plan Simulation<sup>*</sup></b></td>
                        {% set counter = 1 %}
                        {% set total = total1b %}
                        {% for data in income_per_month.PVSYST_plan_proceeds_EXP %}
                            {% if (counter > 6) %}
                                {% if data == 0 %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    <td class="tr_next_columns">{{ data|number_format(0, ',', '.') }}</td>
                                {% endif %}
                                {% set total = total + data %}
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                        <td class="tr_next_columns">{{ total|number_format(0, ',', '.') }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left" colspan="7">
                            <sup>*</sup> Plan Simulation (PS); is a yield simulation program for photovoltaic systems, e.g.: PVSyst, PVSol, etc.
                        </td>
                    </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td style="text-align: left!important;">
                {{ income_per_month_chart|raw }}
            </td>
        </tr>
    </table>
{% endblock page %}