{% extends 'report/_asset_mangement_partials/_pageBase.html.twig' %}

{% block page %}
    <h3 style="color: {{ anlage.eigner.fontColor2 }};">Economics</h3>
    <span class="subheadline">Comparison of monthly looses</span>

    <table >
        <tr>
            <td colspan="2" style="text-align: left">
                <table class="asset_report_table_operations_data" style="width: 100%!important;">
                    <tbody>
                    <tr style="font-weight: bold;">
                        <td class="tr_next_columns" style="background-color: #ededed; width: 300px;">Losses Operating statement [EUR]</td>
                        {% set counter = 1 %}
                        {% for data in dataMonthArrayFullYear %}
                            {% if (counter < 7) %}
                                <td class="tr_next_columns" style="background-color: #ededed; text-align: center!important;">{{ data }} {{ year }}</td>
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Diff ACT - Profit to EXP g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_to_expected %}
                            {% if (counter < 7) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Diff ACT - Profit to g4n forecast</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_ACT_to_g4n_plan %}
                            {% if (counter < 7) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; "><b>Diff ACT - Profit to Plan Simulation</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_ACT_to_PVSYST_plan %}
                            {% if (counter < 7) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: left">
                <table class="asset_report_table_operations_data" style="width: 100%!important;">
                    <tbody>
                    <tr style="font-weight: bold;">
                        <td class="tr_next_columns" style="background-color: #ededed; width: 300px;">Losses Operating statement [EUR]</td>
                        {% set counter = 1 %}
                        {% for data in dataMonthArrayFullYear %}
                            {% if (counter > 6) %}
                                <td class="tr_next_columns" style="background-color: #ededed; text-align: center!important;">{{ data }} {{ year }}</td>
                            {% endif %}
                            {% set counter = counter+1 %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Diff ACT - Profit to EXP g4n</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_to_expected %}
                            {% if (counter > 6) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed;"><b>Diff ACT - Profit to g4n forecast</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_ACT_to_g4n_plan %}
                            {% if (counter > 6) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    <tr>
                        <td class="tr_next_columns" style="background-color: #ededed; "><b>Diff. ACT - Profit to Plan Simulation</b></td>
                        {% set counter = 1 %}
                        {% set total = 0 %}
                        {% for data in lossesComparedTable.Difference_Profit_ACT_to_PVSYST_plan %}
                            {% if (counter > 6) %}
                                {% if data == 0 or counter > reportmonth %}
                                    <td class="tr_next_columns">-</td>
                                {% else %}
                                    {% if data > 0 %}
                                        <td class="tr_next_columns" style="color: green">{{ data|number_format(0, ',', '.') }}</td>
                                    {% else %}
                                        <td class="tr_next_columns" style="color: red">{{ data|number_format(0, ',', '.') }}</td>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% set counter = counter+1 %}
                            {% set total = total + data %}
                        {% endfor %}
                    </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td style="text-align: center!important;">
                {{ losses_compared_chart|raw }}
            </td>
        </tr>
    </table>
{% endblock page %}